<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for app/containers/StudentEnrollmentTableContainer/tableValidation.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="..\..\..\prettify.css" />
    <link rel="stylesheet" href="..\..\..\base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(..\..\..\sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="..\..\..\index.html">All files</a> / <a href="index.html">app/containers/StudentEnrollmentTableContainer</a> tableValidation.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/106</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/62</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/34</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/62</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144</td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// Data comin<span class="cstat-no" title="statement not covered" >g in from server has no disabled indicator, so always false to </span>start.<span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ></span></span></span></span></span></span></span></span></span></span></span></span></span></span>
const boolToCheckboxState = val =&gt; {
  if (typeof val === 'boolean') return { checked: val, disabled: false };
  return val;
};
&nbsp;
export const init = (data, rules) =&gt; mergeRules(convertBools(data), rules);
&nbsp;
// Convert checkbox &lt;boolean&gt;data into objects that have `checked` and `disabled` properties
export const convertBools = data =&gt; data.map(row =&gt; row.map(boolToCheckboxState));
&nbsp;
export const mergeRules = (data, rules) =&gt; {
  if (typeof rules !== 'object') return [...data];
&nbsp;
  const rowHeader =
    data &amp;&amp;
    data[0] &amp;&amp;
    data[0].map(item =&gt; {
      const rule = rules.find(r =&gt; r.id === item.id);
      return typeof item === 'object'
        ? { ...item, ...rule, checked: false, totalDisabled: 0, totalChecked: 0 }
        : item;
    });
&nbsp;
  // Return copy of data with new header
  return [rowHeader, ...data.slice(1)];
};
&nbsp;
export function getItemsInColumn(row<span class="cstat-no" title="statement not covered" >s, columnIndex) {</span>
  return rows.map((row, rowIndex) =&gt; rows[rowIndex][columnIndex]);
}
&nbsp;
export function isAnyDisabled(<span class="cstat-no" title="statement not covered" >items) {</span>
  return items.some(item =&gt; item.disabled === true);
}
&nbsp;
export function isAllChecked(items) {<span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ></span></span></span></span></span></span>
  return items.every(item <span class="cstat-no" title="statement not covered" >=&gt; item.c<span class="fstat-no" title="function not covered" >hecked === true);<span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ></span></span></span></span></span></span></span></span>
}<span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>
<span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ></span></span></span></span></span></span></span></span></span></span></span></span></span>
export const validateHea<span class="cstat-no" title="statement not covered" >derRow = rows =&gt; {<span class="fstat-no" title="function not covered" ></span></span>
  const headerRow <span class="cstat-no" title="statement not covered" >= rows[0</span>];
  const talliedHeaderRow <span class="cstat-no" title="statement not covered" >= headerRow.ma<span class="fstat-no" title="function not covered" >p(</span>(headerItem, columnIndex) =&gt; {</span>
<span class="cstat-no" title="statement not covered" >    if (typeof headerItem === 'string') {</span>
<span class="cstat-no" title="statement not covered" >      return headerItem;</span>
    }
&nbsp;
    // Slice off the first item which is the header item
    const itemsColumn <span class="cstat-no" title="statement not covered" >= getItemsInColumn(rows, columnIndex).slice(1</span>);
    const anyDisabled <span class="cstat-no" title="statement not covered" >= isAnyDisabled(itemsColumn</span>);
    const allChecked <span class="cstat-no" title="statement not covered" >= isAllChecked(itemsColumn</span>);
&nbsp;
<span class="cstat-no" title="statement not covered" >    return { ...headerItem, anyDisabled, allChecked };</span>
  });
&nbsp;
  const updatedRows <span class="cstat-no" title="statement not covered" >= [talliedHeaderRow, ...rows.slice(1)];</span>
<span class="cstat-no" title="statement not covered" >  return updatedRows;</span>
};
&nbsp;
// Updates `disabled` property of each item in row based on rules
export const valid<span class="cstat-no" title="statement not covered" >ateRow = (data, rowIndex) =&gt; {<span class="fstat-no" title="function not covered" ></span></span>
  const rules <span class="cstat-no" title="statement not covered" >= data[0</span>];
  const itemsToDisable <span class="cstat-no" title="statement not covered" >= data[rowIndex].reduc<span class="fstat-no" title="function not covered" >e(</span>(siblings, item, columnIndex) =&gt; {</span>
    const appendSiblings =
<span class="cstat-no" title="statement not covered" >      typeof item === 'object' &amp;&amp; item.checked === true ? rules[columnIndex].siblings : [];</span>
<span class="cstat-no" title="statement not covered" >    return siblings.concat(appendSiblings);</span>
  }, []);
&nbsp;
  const validatedRow <span class="cstat-no" title="statement not covered" >= data[rowIndex].ma<span class="fstat-no" title="function not covered" >p(</span>(item, columnIndex) =&gt; {</span>
    const disabled <span class="cstat-no" title="statement not covered" >= itemsToDisable.includes(rules[columnIndex] &amp;&amp; rules[columnIndex].id</span>);
<span class="cstat-no" title="statement not covered" >    return typeof item === 'object' ? { ...item, disabled } : item;</span>
  });
&nbsp;
<span class="cstat-no" title="statement not covered" >  return validatedRow;</span>
};
&nbsp;
export const valid<span class="cstat-no" title="statement not covered" >ateAll = (data = [], rules) =&gt; <span class="fstat-no" title="function not covered" >{<span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ></span></span></span></span>
  const initializedData <span class="cstat-no" title="statement not covered" >= init(data, rules</span>);
  const validatedRowData <span class="cstat-no" title="statement not covered" >= initializedData.ma<span class="fstat-no" title="function not covered" >p(</span>(_, index) =&gt; valid<span class="cstat-no" title="statement not covered" >ateRow(initializedData, index));</span></span>
  const validatedAllData <span class="cstat-no" title="statement not covered" >= validateHeaderRow(validatedRowData</span>);
<span class="cstat-no" title="statement not covered" >  return validatedAllData;</span>
};
&nbsp;
export const upda<span class="cstat-no" title="statement not covered" >teItem = (<span class="fstat-no" title="function not covered" ></span></span>
  item,
  index,
  activeColumnIndex,
  siblingIndexesToActiveColumn,
  newItemValue
) =&gt; {
  // Potentially a string, do nothing.
<span class="cstat-no" title="statement not covered" >  if (typeof item !== 'object') return item;<span class="cstat-no" title="statement not covered" ></span></span>
  // Items not clicked
<span class="cstat-no" title="statement not covered" >  if (index !== activeColumnIndex) {</span>
    const isSibling <span class="cstat-no" title="statement not covered" >= siblingIndexesToActiveColumn.includes(index</span>);
    // If it is a sibling, uncheck it. Disabling handled separately.
<span class="cstat-no" title="statement not covered" >    if (isSibling) {</span>
<span class="cstat-no" title="statement not covered" >      return { ...item, checked: false };</span>
    }
    // If the item is not related to the clicked item, return same item.
<span class="cstat-no" title="statement not covered" >    return { ...item };</span>
  }
  // Toggle the clicked on item
<span class="cstat-no" title="statement not covered" >  return { ...item, checked: newItemValue };</span>
};
&nbsp;
export const rowWithToggl<span class="cstat-no" title="statement not covered" >edItem = (row, activeColumnIndex, sibl<span class="fstat-no" title="function not covered" >ingIndexesToActiveC</span>olumn) =&gt;<span class="cstat-no" title="statement not covered" ></span></span>
  row.map((i<span class="fstat-no" title="function not covered" >te</span>m, index) =&gt;<span class="cstat-no" title="statement not covered" ></span>
    updateItem(item, index, activeColumnIndex, siblingIndexesToActiveColumn, !item.checked)
  );
&nbsp;
export const getSiblingI<span class="cstat-no" title="statement not covered" >ndexes = (rowHeader, activeColumnInde<span class="fstat-no" title="function not covered" >x) =&gt; {</span></span>
  const siblingsToActiveColumn =
<span class="cstat-no" title="statement not covered" >    (rowHeader[activeColumnIndex] &amp;&amp; rowHeader[activeColumnIndex].siblings) ||</span> [];
<span class="cstat-no" title="statement not covered" >  return siblingsToActiveColumn.map(<span class="fstat-no" title="function not covered" >si</span>blingId =&gt; rowHeader<span class="cstat-no" title="statement not covered" >.findIndex(r =&gt; r.id === si<span class="fstat-no" title="function not covered" >bl</span>ingId));<span class="cstat-no" title="statement not covered" ></span></span></span>
};
&nbsp;
export const tog<span class="cstat-no" title="statement not covered" >gleAll = (data, activeColumnI<span class="fstat-no" title="function not covered" >ndex, valu</span>e = false) =&gt; {<span class="cstat-no" title="statement not covered" ></span></span>
  const rowHeader <span class="cstat-no" title="statement not covered" >= data[0</span>];
  const rows <span class="cstat-no" title="statement not covered" >= data.slice(1</span>);
  const updatedRows <span class="cstat-no" title="statement not covered" >= rows.ma<span class="fstat-no" title="function not covered" >p(</span>row =&gt; {</span>
    const siblingIndexesToActiveColumn <span class="cstat-no" title="statement not covered" >= getSiblingIndexes(rowHeader, activeColumnIndex</span>);
    const updatedRow <span class="cstat-no" title="statement not covered" >= row.ma<span class="fstat-no" title="function not covered" >p(</span>(item, index) =&gt;<span class="cstat-no" title="statement not covered" ></span></span>
      updateItem(item, index, activeColumnIndex, siblingIndexesToActiveColumn, value)
    );
<span class="cstat-no" title="statement not covered" >    return updatedRow;</span>
  });
<span class="cstat-no" title="statement not covered" >  return [rowHeader, ...updatedRows];</span>
};
&nbsp;
export const <span class="cstat-no" title="statement not covered" >toggle = (data, rowIndex, <span class="fstat-no" title="function not covered" >activeC</span>olumnIndex) =&gt; {</span>
  const rowHeader <span class="cstat-no" title="statement not covered" >= data[0</span>];
  const row <span class="cstat-no" title="statement not covered" >= data[rowIndex</span>];
  const siblingIndexesToActiveColumn <span class="cstat-no" title="statement not covered" >= getSiblingIndexes(rowHeader, activeColumnIndex</span>);
&nbsp;
  const updatedData <span class="cstat-no" title="statement not covered" >= [...data];</span>
<span class="cstat-no" title="statement not covered" >  updatedData[rowIndex] = rowWithToggledItem(row, activeColumnIndex, siblingIndexesToActiveColumn);</span>
&nbsp;
  const rowValidated <span class="cstat-no" title="statement not covered" >= validateRow(updatedData, rowIndex</span>);
<span class="cstat-no" title="statement not covered" >  updatedData[rowIndex] = rowValidated;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return updatedData;</span>
};
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Sat Jul 21 2018 17:06:47 GMT+0530 (India Standard Time)
</div>
</div>
<script src="..\..\..\prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="..\..\..\sorter.js"></script>
</body>
</html>
